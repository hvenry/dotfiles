# SOURCE MACHINE-SPECIFIC CONFIGURATION
# Copy one of the configs from machines/ to local.conf:
#   cp machines/laptop.conf local.conf
#   cp machines/desktop.conf local.conf
source = ~/.config/hypr/local.conf

# Autostart
# exec-once = qs &
# exec-once = waybar
# Waybar
exec-once = ~/.config/waybar/launch.sh

# exec-once = swaync
exec-once = mako
exec-once = hyprpaper & hypridle
exec-once = /usr/lib/polkit-kde-agent-1

# dpi fix
exec-once = xrdb -merge ~/.Xresources

# Theming
exec = gsettings set org.gnome.desktop.interface gtk-theme "Adwaita-dark"
exec = gsettings set org.gnome.desktop.interface color-scheme "prefer-dark"

# NVIDIA stuff
env = WLR_NO_HARDWARE_CURSORS,1
env = LIBVA_DRIVER_NAME,nvidia
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia

# Cursor settings
env = XCURSOR_THEME,Bibata-Modern-Classic
env = XCURSOR_SIZE,24

# SETTINGS
general {
  gaps_in = 6
  gaps_out = 16
  border_size = 1
  col.inactive_border = 0xff000000
  col.active_border = 0xff141414
  resize_on_border = true
}

decoration {
  rounding = 0
  inactive_opacity = 0.95
  dim_inactive = true
  dim_strength = 0.05
  blur {
    enabled = true
    size = 2
    passes = 3
  }
  shadow {
    enabled = true
    range = 0
  }
}

input {
  kb_layout = us
  natural_scroll = no
  repeat_delay = 250
  repeat_rate  = 50
  follow_mouse = 1
  kb_options = ctrl:nocaps
  natural_scroll = false
  touchpad {
      natural_scroll = true
  }
}

group {
}

misc {
  disable_hyprland_logo = true
  disable_autoreload = false
  mouse_move_focuses_monitor = true
  background_color = 0x00000000
  new_window_takes_over_fullscreen = 2
  font_family = JetBrainsMono Nerd Font
}

cursor {
  inactive_timeout = 5
  persistent_warps = true
  zoom_factor = 1
}

animations {
    enabled = yes
    bezier = myCurve, 0.4, 0.7, 0.4, 1.0
    animation = windows, 1, 2, myCurve
    animation = windowsOut, 1, 5, default, popin 80%
    animation = border, 1, 5, default
    animation = workspaces, 1, 2, default
}


ecosystem {
  no_donation_nag = true # sorry
}

debug {
  # overlay = true
}

xwayland {
  enabled = true
  force_zero_scaling = true 
}


# KEYBINDS
$terminal = ghostty
$menu = rofi -show drun
$fileManger = thunar

$mod = SUPER 

# Application specific
bind = $mod, t, exec, $terminal
bind = $mod, SPACE, exec, $menu
bind = $mod, escape, exec, hyprlock
bind = $mod, e, exec, $fileManger
bind = $mod, p, exec, hyprpicker --autocopy

# Screenshots
bind = $mod, C, exec, hyprshot -m window
bind = $mod SHIFT, C, exec, hyprshot -m region

bind = $mod, Q, killactive
bind = $mod, Tab, focusmonitor, +1
bind = $mod, f, togglefloating
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# window management
bind = $mod, Return, fullscreen, 1
bind = $mod, H, movefocus, l
bind = $mod, J, movefocus, d
bind = $mod, K, movefocus, u
bind = $mod, L, movefocus, r

# Rearragne windwos
bind = $mod, left, movewindow, l
bind = $mod, right, movewindow, r
bind = $mod, up, movewindow, u
bind = $mod, down, movewindow, d

# workspaces 1-5
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5

# MONITOR CONFIGURATION
# Monitor and workspace settings are loaded from local.conf sourced at the top of this file

# Fallback for additional monitors
monitor = , preferred, auto, 1

windowrulev2 = float, class:^(thunar)$
windowrulev2 = center, class:^(thunar)$
windowrulev2 = size 900 600, class:^(thunar)$
windowrulev2 = opacity 0.9, class:^(thunar)$

# nmtui window rules
windowrulev2 = size 1000 600, class:^(com\.mitchellh\.ghostty)$,floating:1
windowrulev2 = center, class:^(com\.mitchellh\.ghostty)$,floating:1  
windowrulev2 = opacity 0.9, class:^(com\.mitchellh\.ghostty)$,floating:1

# blur configuration
layerrule = blur, waybar
layerrule = ignorezero, waybar

layerrule = blur, rofi
layerrule = ignorezero, rofi
layerrule = noanim, rofi

layerrule = blur, notifications
layerrule = ignorezero, notifications
layerrule = noanim, notifications

layerrule = blur, thunar
layerrule = ignorezero, thunar

layerrule = blur, logout_dialog
layerrule = ignorezero, logout_dialog
