# 24 bit colour
set-option -sa terminal-overrides ",xterm*:Tc"
set -g default-terminal "tmux-256color"

# enable mouse support
set -g mouse on

# start window index at 1 instead of 0 for better navigation
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on


# ---------- KEYBINDINGS ---------- 
# vi mode
set-window-option -g mode-keys vi

# update prefix to ctrl+space
unbind C-b
set -g prefix C-space
bind c-Space send-prefix

# reload config 
unbind ,
bind , source-file ~/.config/tmux/tmux.conf

# new window
unbind t
bind t new-window

# cycle windows
unbind H
bind H previous-window
unbind L
bind L next-window

# find session
unbind f
bind f choose-tree -s

# split panes and open in current directory
bind - split-window -v -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"

# vim-like yanking bindings
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# rename session
bind-key r command-prompt -I "#S" "rename-session '%%'"
# rename window
bind-key R command-prompt -I "#W" "rename-window '%%'"

# vim-like resizing
bind -r h resize-pane -L 1    # Move left
bind -r j resize-pane -D 1    # Move down
bind -r k resize-pane -U 1    # Move up
bind -r l resize-pane -R 1    # Move right


# ---------- PLUGINS ---------- 
# source tpm package
set -g @plugin 'tmux-plugins/tpm'

# tmux plugins
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'tmux-plugins/tmux-yank'


# ---------- STATUS BAR ---------- 
set -g @plugin 'janoamaral/tokyo-night-tmux'

set -g @tokyo-night-tmux_transparent 1
set -g @tokyo-night-tmux_window_id_style super
set -g @tokyo-night-tmux_pane_id_style hide
set -g @tokyo-night-tmux_window_tidy_icons 0
set -g @tokyo-night-tmux_terminal_icon 
set -g @tokyo-night-tmux_active_terminal_icon 

set -g @tokyo-night-tmux_show_datetime 0


# ---------- RUN TPM ---------- 
run '~/.config/tmux/plugins/tpm/tpm'
